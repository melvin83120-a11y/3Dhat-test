<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Test Chapeau GLB</title>
<style>
  body { margin:0; overflow:hidden; background:#111; color:white; font-family:sans-serif; }
  #controls { position:absolute; top:10px; left:10px; background:rgba(0,0,0,0.6); padding:10px; border-radius:10px; }
  input[type=range] { width:150px; }
  #loading { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); font-size:20px; }
</style>
</head>
<body>

<div id="controls">
  <label>√âchelle:</label><br>
  <input type="range" id="scaleRange" min="0.1" max="5" step="0.1" value="1"><br><br>

  <label>Position X:</label><br>
  <input type="range" id="posX" min="-5" max="5" step="0.1" value="0"><br><br>

  <label>Position Y:</label><br>
  <input type="range" id="posY" min="-5" max="5" step="0.1" value="0"><br><br>

  <label>Position Z:</label><br>
  <input type="range" id="posZ" min="-5" max="5" step="0.1" value="0"><br>
</div>

<div id="loading">Chargement du mod√®le...</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.150.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.150.0/examples/js/loaders/GLTFLoader.js"></script>

<script>
let scene, camera, renderer, hat;

scene = new THREE.Scene();
camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
renderer = new THREE.WebGLRenderer({ antialias:true });
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

const light = new THREE.DirectionalLight(0xffffff, 1);
light.position.set(1, 1, 1).normalize();
scene.add(light);

camera.position.z = 3;

const loader = new THREE.GLTFLoader();

// üîó Lien complet vers ton mod√®le
loader.load(
  "https://raw.githubusercontent.com/melvin83120-a11y/3Dhat-test/main/Chapeau.glb",
  (gltf) => {
    hat = gltf.scene;
    scene.add(hat);
    document.getElementById("loading").style.display = "none";
  },
  (xhr) => {
    if (xhr.total) {
      document.getElementById("loading").textContent =
        "Chargement... " + (xhr.loaded / xhr.total * 100).toFixed(0) + "%";
    }
  },
  (error) => {
    document.getElementById("loading").textContent = "Erreur : impossible de charger le mod√®le.";
    console.error("Erreur GLB :", error);
  }
);

// üéö Curseurs
document.getElementById("scaleRange").addEventListener("input", (e) => {
  if (hat) {
    let s = parseFloat(e.target.value);
    hat.scale.set(s, s, s);
  }
});
document.getElementById("posX").addEventListener("input", (e) => {
  if (hat) hat.position.x = parseFloat(e.target.value);
});
document.getElementById("posY").addEventListener("input", (e) => {
  if (hat) hat.position.y = parseFloat(e.target.value);
});
document.getElementById("posZ").addEventListener("input", (e) => {
  if (hat) hat.position.z = parseFloat(e.target.value);
});

function animate() {
  requestAnimationFrame(animate);
  renderer.render(scene, camera);
}
animate();

window.addEventListener("resize", () => {
  camera.aspect = window.innerWidth/window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
});
</script>
</body>
</html>
